<!DOCTYPE html>
<html lang="en">

<head>
  <metacharset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <script src="https://kit.fontawesome.com/b21f20a653.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/hover.css/2.3.1/css/hover-min.css" type="text/css" />
  {{!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/baguettebox.js/1.8.1/baguetteBox.min.css"> --}}
  {{!-- <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css"> --}}
  {{!-- <script src="//code.jquery.com/jquery-1.10.2.js"></script> --}}
  {{!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script> --}}
  
  <link rel="stylesheet" href="stylesheets/styles.css" type="text/css" />

  <title>MockBuster - Account</title>

</head>

<body>

  <!-- Header -->
  <header>
    {{#if sessionFlash.message}}
    <div class="alert alert-{{ sessionFlash.type }} alert-dismissible">
      <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
      <strong>Success:</strong> {{ sessionFlash.message }}
    </div>
    {{/if}}
    <div class="container-fluid header-container">
      <div class="row no-gutters">
        <a class="col-md-2 logo" href="/films"></a>
        <nav class="col-md-10 navbar navbar-expand-sm navbar-light bg-white">
          <a class="navbar-brand" href="/films"><i class="fas fa-photo-video"></i></a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span><!-- This compenent is what provides the three bar icon for the button --></button>
            <div class="collapse navbar-collapse" id="navbarNavDropdown">
              <!-- The id name must match the data-target seen in row 28 -->
              <ul class="navbar-nav">
                <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Genres
                  </a>
                  <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                    <a class="dropdown-item" href="/films/action">Action<i class="fas fa-radiation-alt float-right"></i></a>
                    <a class="dropdown-item" href="/films/biopic">Biopic<i class="fas fa-user-tie float-right"></i></a>
                    <a class="dropdown-item" href="/films/comedy">Comedy<i class="fas fa-theater-masks float-right"></i></a>
                    <a class="dropdown-item" href="/films/crime">Crime<i class="fas fa-mask float-right"></i></a>
                    <a class="dropdown-item" href="/films/drama">Drama<i class="fas fa-heartbeat float-right"></i></a>
                    <a class="dropdown-item" href="/films/fantasy">Fantasy<i class="fas fa-dragon float-right"></i></a>
                    <a class="dropdown-item" href="/films/history">History<i class="fab fa-fort-awesome float-right"></i></a>
                    <a class="dropdown-item" href="/films/horror">Horror<i class="fas fa-ghost float-right"></i></a>
                    <a class="dropdown-item" href="/films/kids">Kids<i class="fas fa-child float-right"></i></a>
                    <a class="dropdown-item" href="/films/legal">Legal<i class="fas fa-balance-scale float-right"></i></a>
                    <a class="dropdown-item" href="/films/musical">Musical<i class="fas fa-music float-right"></i></a>
                    <a class="dropdown-item" href="/films/romance">Romance<i class="fas fa-grin-hearts float-right"></i></a>
                    <a class="dropdown-item" href="/films/sports">Sports<i class="fas fa-futbol float-right"></i></a>
                    <a class="dropdown-item" href="/films/superhero">Superhero<i class="fab fa-superpowers float-right"></i></i></a>
                    <a class="dropdown-item" href="/films/thriller">Thriller<i class="far fa-surprise float-right"></i></a>
                    <a class="dropdown-item" href="/films/war">War<i class="fas fa-bomb float-right"></i></a>
                    <hr/>
                    <a class="dropdown-item" href="/films">Library<i class="fas fa-photo-video float-right"></i></a>
                  </div>
                </li>
                <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    A-Z
                  </a>
                  <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                    <a class="dropdown-item" href="/films/a_to_e">A-E</a>
                    <a class="dropdown-item" href="/films/f_to_j">F-J</a>
                    <a class="dropdown-item" href="/films/k_to_o">K-O</a>
                    <a class="dropdown-item" href="/films/p_to_t">P-T</a>
                    <a class="dropdown-item" href="/films/u_to_z">U-Z</a>
                    <hr/>
                    <a class="dropdown-item" href="/films/zero_to_nine">0-9</a>
                    <hr/>
                    <a class="dropdown-item" href="/films">Library<i class="fas fa-photo-video float-right"></i></a>
                  </div>
                </li>

                <!-- Header - search box -->
                <li class="nav-item">
                  <form class="form-inline" action="/films/search"  method="get">
                    <div class="">
                      <div class="form-group">
                        <div class="col-md-12">
                          <input type="text" id="searchName" class="form-control" name="search" placeholder="Search Films...">
                        </div>
                      </div>
                    </div>
                    <input type="submit" class="form-control btn btn-primary" name="submit" value="Search">
                  </form>
                </li>
                <!-- /Header - /search box -->

                <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    {{#users}}
                    {{this.firstname}}'s Account
                    {{/users}}
                  </a>
                  <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                    <a class="dropdown-item" href="/account">My Details<i class="fas fa-info-circle float-right"></i></a>
                    <a class="dropdown-item" href="/blog">Blog<i class="fas fa-blog float-right"></i></a>
                    <a class="dropdown-item" href="/checkout">Checkout<i class="fas fa-shopping-cart float-right"></i></a>
                    <a class="dropdown-item" href="/auth/session/destroy">Log Out<i class="fas fa-sign-out-alt float-right"></i></a>
                  </div>
                </li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </header>
    <!-- /.Header -->

    <!-- Callout -->
    <div class="each-event">
      <div class="container-fluid background-jumbotron callout-container">
        <div class="opaque-overlay">&nbsp;</div>
        <div class="col-4 form-background">
      <h1 style="text-align: center;">Account Details</h1>
      <br>
      {{#users}}
      <img src="{{this.imageUrl}}" alt="{{this.firstname}}" class="profilePic" onerror="this.src='../images/blank-profile-picture.png';">
      <a class="nav-link hvr-icon-bounce" data-toggle="modal" data-target="#edit6" style="display: inline;">
        <i id="edit" class="fas fas fa-edit hvr-icon pic-edit" aria-hidden="true" ></i>
        <span class="fa-lg sr-only">Edit Profile Pic</span>
      </a>
      <hr>

      <!-- Callout - edit img modal -->
      <div class="modal fade" id="edit6" tabindex="-1" role="dialog" aria-labelledby="basketLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="basketLabel"><b>Edit</b></h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <form id="new-name-form" style = "display: inline; margin-top: -20px;" action="/account/upload/{{this._id}}" method="post" enctype="multipart/form-data">
                <input type="hidden" name="_method" value="PATCH" />
                <div class="form-group">
                  <label for="recipient-name" class="col-form-label">Edit your profile pic:</label>
                  <input type='file' accept="image/*" name="imageUrl"/>
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <input type="submit" class="btn btn--teal btn-primary" value="Edit"/>
              </div>
            </form>
          </div>
        </div>
      </div>
      <!-- /.Callout - edit img modal -->

      <br>
      {{!-- <div class="event-description" style="text-align: center;">
        <p id="user-first-name" style="color: black;">First Name: {{this.firstname}}</p>
        <p id="user-last-name" style="color: black;">Last Name: {{this.lastname}}</p>
        <p id="user-email-name"style="color: black;">Email: {{this.email}}</p> --}}
        <div class="event-description" style="text-align: center;">
        <table class="table table-sm table-striped">
                <tbody>
                  <tr>
                    <th scope="row">First Name:</th>
                    <td width="80%">{{this.firstname}}</td>
                  </tr>
                  <tr>
                    <th scope="row">Last Name:</th>
                    <td>{{this.lastname}}</td>
                  </tr>
                  <tr>
                    <th scope="row">Email:</th>
                    <td>{{this.email}}</td>
                  </tr>
                  <tr>
                    <th scope="row">Address Line 1:</th>
                    <td>{{this.address_first_line}}</td>
                  </tr>
                  <tr>
                    <th scope="row">Address Line 2:</th>
                    <td>{{this.address_second_line}}</td>
                  </tr>
                  <tr>
                    <th scope="row">City:</th>
                    <td>{{this.address_town}}</td>
                  </tr>
                  <tr>
                    <th scope="row">Postcode:</th>
                    <td>{{this.address_post_code}}</td>
                  </tr>
                </tbody>
              </table>

        <a class="nav-link hvr-icon-bounce" data-toggle="modal" data-target="#edit1" style="">
          <i id="edit" class="fas fas fa-edit hvr-icon" aria-hidden="true" ></i>
          <span class="fa-lg sr-only">Edit Details</span>
        </a>

        <!-- Callout - edit USER modal -->
        <div class="modal fade" id="edit1" tabindex="-1" role="dialog" aria-labelledby="basketLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="basketLabel"><b>Edit</b></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>

              <div class="modal-body">
                <form id="new-name-form" style="display: inline; margin-top: -20px;" action="/account/edit_user/{{this._id}}" method="post">

                  <input type="hidden" name="_method" value="PATCH" />
                  <div class="form-group">
                    <label for="recipient-name" class="col-form-label">Edit your first name:</label>
                    <input type="text" class="form-control" id="recipient-name" placeholder="First name" name="firstname"value="{{this.firstname}}">
                  </div>

                  <input type="hidden" name="_method" value="PATCH" />
                  <div class="form-group">
                    <label for="recipient-name" class="col-form-label">Edit your last name:</label>
                    <input type="text" class="form-control" id="recipient-name" placeholder="Last name" name="lastname" value="{{this.lastname}}">
                  </div>

                  <input type="hidden" name="_method" value="PATCH" />
                  <div class="form-group">
                    <label for="recipient-name" class="col-form-label">Edit your email address:</label>
                    <input type="text" class="form-control" id="recipient-name" placeholder="Email address" name="email" value="{{this.email}}">
                  </div>

                  <input type="hidden" name="_method" value="PATCH" />
                  <div class="form-group">
                    <label for="recipient-name" class="col-form-label">Edit your home address:</label>
                    <input type="text" class="form-control" id="recipient-name" placeholder="Address line 1" name="address_first_line" value="{{this.address_first_line}}">
                    <input type="text" class="form-control" id="recipient-name" placeholder="Address line 2" name="address_second_line" value="{{this.address_second_line}}">
                    <input type="text" class="form-control" id="recipient-name" placeholder="Town" name="address_town" value="{{this.address_town}}">
                    <input type="text" class="form-control" id="recipient-name" placeholder="Post Code" name="address_post_code" value="{{this.address_post_code}}">
                  </div>

                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                  <input type="submit" class="btn btn--teal btn-primary" value="Edit" />
                </div>
              </form>
            </div>
          </div>
        </div>
        <!-- /.Callout - edit USER modal -->

        <hr>
        <p id="user-password"style="color: black;">To update your password please click the edit button:</p>
        <a class="nav-link hvr-icon-bounce" data-toggle="modal" data-target="#edit4" style="">
          <i id="edit" class="fas fas fa-edit hvr-icon" aria-hidden="true" ></i>
          <span class="fa-lg sr-only">Edit Password</span>
        </a>

        <!-- Callout - edit password modal -->
        <div class="modal fade" id="edit4" tabindex="-1" role="dialog" aria-labelledby="basketLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="basketLabel"><b>Edit</b></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <form id="new-password-form" style="display: inline; margin-top: -20px;" action="/account/password/{{this._id}}" method="post">
                  <input type="hidden" name="_method" value="PATCH" />
                  <div class="form-group">
                    <label for="exampleInputPassword1" class="col-form-label">To update your password please enter in the space provided below and press edit.</label>
                    <input type="password" class="form-control" id="exampleInputPassword1" name="password" placeholder="Enter new password here">
                  </div>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                  <input type="submit" class="btn btn--teal btn-primary" value="Edit" />
                </div>
              </form>
            </div>
          </div>
        </div>
        <!-- /.Callout - edit password modal -->

        <hr>
        <br>
        <div style="text-align: center;">
          <form id="delete-user-form" style = "display: inline;" action="/account/delete/{{this._id}}" method="post">
            <input type="hidden" name="_method" value="DELETE" />
            <input class="btn-primary" style="text-align: center; margin-bottom: 20px;"type="submit" value="Delete Account" />
          </form>
        </div>
        <br>
        <hr>
        <h1>Feedback</h1>
        <br>
        <div class="feedback">
            <h3>Make a Suggestion</h3>
            <p>Can't find the film you're looking for? Suggest it below!!</p>
            <form action="/account/feedback" id="usrform" method="post">
            <p style="text-align:center;"> Name: {{this.firstname}}</p>
            <br>
            <textarea class="textbox" rows="4" cols="35" name="movieSuggestion" form="usrform" placeholder="Suggest a Movie..."></textarea>
            <p id="demo1"></p>
            <input hidden name="userId" type="text" class="form-control textbox" id="exampleInputUserId" value="{{this._id}}">
            <input type="submit" style="margin-top:10px;">
          </form>
          </div>
          <br>
          <br>
          <div class="feedback">
            <h3>Complaints</h3>
            <p> At MockBuster we strive to give a wonderful viewing experience. However, if you are not satisfied or have ideas on how we can make MockBuster even better, please let us know below!!</p>
            <form action="/account/feedback" id="complaintform" method="post">
              <p style="text-align:center;">Name: {{this.firstname}}</p>
            <br>
            <textarea class="textbox" rows="4" cols="35" name="complaint" form="complaintform" placeholder="What could we do better?"></textarea>
            <p id="demo2"></p>
            <input hidden name="userId" type="text" class="form-control textbox" id="exampleInputUserId" value="{{this._id}}">
            <input type="submit" style="margin-top:10px;">
          </form>
          </div>
          <br>
          <br>
        </div>
      </div>
    </div>
    </div>
    </div>
    {{/users}}
    <!-- /.Callout -->

    <!-- Footer -->
    <div id="footer"></div>
    <!-- /.Footer -->

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="../js/jquery.shop.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script type="text/javascript">
    $('.like-btn').on('click', function() {
      $(this).toggleClass('is-active');
    });
    </script>

    <script>
    $(function(){
      $('#searchName').autocomplete({
        source: function(req,res){

          $.ajax({
            url:"films/autocomplete/",
            dataType:"jsonp",
            type:"GET",
            data:req,
            success: function(data){
              res(data)

            },
            error: function(err){
              console.log(err.status);
            }
          });
        },

        minLength:1,
        select: function(event,ui){
          if(ui.item){
            $('#searchName').val(ui.item.label);
          }
        }
      });
    });
    </script>

      <!-- jquery to shrink logo and navbar on scroll -->
      <script>
        $( window ).scroll(function() {
        if($(window).scrollTop() > 70){
          $('.logo').css({'height': '70'});
        }else{
            $('.logo').css({'height': '120'});
        }

        });
      </script>
      
      <script>
        $(function() {
          $('#footer').load('footer.hbs');
        });
      </script>

  </body>

  </html>
